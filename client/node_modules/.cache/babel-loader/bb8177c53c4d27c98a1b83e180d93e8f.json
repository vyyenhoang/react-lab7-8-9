{"ast":null,"code":"import _defineProperty from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Form,Container}from'react-bootstrap';import Axios from'axios';import{Redirect}from'react-router-dom';import{toast}from'react-toastify';var Edit=function Edit(props){var id=props.location.state.id;// found in docs for react router\nvar _useState=useState({title:'',content:'',status:'DRAFT'}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var blogResp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"/api/blogs/\".concat(id));case 2:blogResp=_context.sent;if(blogResp.status===200)setInputs(blogResp.data);case 4:case\"end\":return _context.stop();}}},_callee);}))();},[]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return Axios.post('/api/blogs/update',inputs);case 4:resp=_context2.sent;if(resp.status===200){toast(\"The blog was updated successfully\",{type:toast.TYPE.SUCCESS});setRedirect(true);}else{toast(\"There was an issue updating the blog\",{type:toast.TYPE.ERROR});}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);toast(\"There was an issue updating the blog\",{type:toast.TYPE.ERROR});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleInputChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var _event$target,name,value;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.persist();_event$target=event.target,name=_event$target.name,value=_event$target.value;setInputs(function(inputs){return _objectSpread(_objectSpread({},inputs),{},_defineProperty({},name,value));});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleInputChange(_x2){return _ref3.apply(this,arguments);};}();if(redirect)return/*#__PURE__*/React.createElement(Redirect,{to:\"/blogs\"});return/*#__PURE__*/React.createElement(Container,{className:\"my-5\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Edit Blog Post\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Title:\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"title\",onChange:handleInputChange,value:inputs.title})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Content:\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",name:\"content\",onChange:handleInputChange,value:inputs.content})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Status:\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",name:\"status\",onChange:handleInputChange,defaultValue:inputs.status||'DRAFT'},/*#__PURE__*/React.createElement(\"option\",{value:\"DRAFT\"},\"draft\"),/*#__PURE__*/React.createElement(\"option\",{value:\"PUBLISHED\"},\"published\"))),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Update\")))));};export default Edit;","map":{"version":3,"sources":["E:/React/comp-2068-s20-blogging-platform-master/client/src/components/blogs/Edit.jsx"],"names":["React","useState","useEffect","Form","Container","Axios","Redirect","toast","Edit","props","id","location","state","title","content","status","inputs","setInputs","redirect","setRedirect","get","blogResp","data","handleSubmit","event","preventDefault","post","resp","type","TYPE","SUCCESS","ERROR","handleInputChange","persist","target","name","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Form, Container } from 'react-bootstrap';\nimport Axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst Edit = function (props) {\n\n  const id = props.location.state.id; // found in docs for react router\n\n  const [inputs, setInputs] = useState({\n    title: '',\n    content: '',\n    status: 'DRAFT'\n  });\n\n  const [redirect, setRedirect] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      const blogResp = await Axios.get(`/api/blogs/${id}`);\n      if (blogResp.status === 200) setInputs(blogResp.data);\n    })();\n  }, []);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const resp = await Axios.post('/api/blogs/update', inputs);\n\n      if (resp.status === 200)  {\n        toast(\"The blog was updated successfully\", {\n          type: toast.TYPE.SUCCESS\n        });\n        setRedirect(true);\n      } else {\n        toast(\"There was an issue updating the blog\", {\n          type: toast.TYPE.ERROR\n        });\n      }\n    } catch (error) {\n      toast(\"There was an issue updating the blog\", {\n        type: toast.TYPE.ERROR\n      });\n    }\n  };\n\n  const handleInputChange = async event => {\n    event.persist();\n\n    const { name, value } = event.target;\n\n    setInputs(inputs => ({\n      ...inputs,\n      [name]: value\n    }));\n  };\n\n  if (redirect) return (<Redirect to=\"/blogs\"/>);\n\n  return (\n    <Container className=\"my-5\">\n      <header>\n        <h1>Edit Blog Post</h1>\n      </header>\n\n      <hr/>\n\n      <div>\n        <Form onSubmit={handleSubmit}>\n          <Form.Group>\n            <Form.Label>Title:</Form.Label>\n            <Form.Control\n              name=\"title\"\n              onChange={handleInputChange}\n              value={inputs.title}\n            />\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Content:</Form.Label>\n            <Form.Control\n              as=\"textarea\"\n              name=\"content\"\n              onChange={handleInputChange}\n              value={inputs.content}\n            />\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Status:</Form.Label>\n            <Form.Control\n              as=\"select\"\n              name=\"status\"\n              onChange={handleInputChange}\n              defaultValue={inputs.status || 'DRAFT'}\n            >\n              <option value=\"DRAFT\">draft</option>\n              <option value=\"PUBLISHED\">published</option>\n            </Form.Control>\n          </Form.Group>\n\n          <Form.Group>\n            <button type=\"submit\" className=\"btn btn-primary\">Update</button>\n          </Form.Group>\n        </Form>\n      </div>\n    </Container>\n  );\n\n};\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}