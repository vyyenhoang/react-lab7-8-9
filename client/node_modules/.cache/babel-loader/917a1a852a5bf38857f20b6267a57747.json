{"ast":null,"code":"import _defineProperty from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{useState}from'react';import Axios from'axios';import{Form,Container}from'react-bootstrap';import{Redirect}from'react-router-dom';import{toast}from'react-toastify';var Login=function Login(_ref){var setUser=_ref.setUser;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return Axios.post('/api/authenticate',inputs);case 4:resp=_context.sent;if(resp.status===200){setUser(resp.data.user);toast('You have logged in successfully',{type:toast.TYPE.SUCCESS});setRedirect(true);}else{toast(\"There was an issue logging you in. Please check your credentials.\",{type:toast.TYPE.ERROR});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);toast(\"There was an issue logging you in. Please check your credentials.\",{type:toast.TYPE.ERROR});case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleInputChange=function handleInputChange(event){event.persist();var _event$target=event.target,name=_event$target.name,value=_event$target.value;setInputs(function(inputs){return _objectSpread(_objectSpread({},inputs),{},_defineProperty({},name,value));});console.log(inputs);};if(redirect){return/*#__PURE__*/React.createElement(Redirect,{to:\"/blogs\"});}return/*#__PURE__*/React.createElement(Container,{className:\"my-5\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Login\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Form,{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email:\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",name:\"email\",onChange:handleInputChange,value:inputs.email})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password:\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",name:\"password\",onChange:handleInputChange,value:inputs.password})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\"},\"Login\"))));};export default Login;","map":{"version":3,"sources":["E:/React/comp-2068-s20-blogging-platform-master/client/src/components/sessions/Login.jsx"],"names":["React","useState","Axios","Form","Container","Redirect","toast","Login","setUser","email","password","inputs","setInputs","redirect","setRedirect","handleSubmit","event","preventDefault","post","resp","status","data","user","type","TYPE","SUCCESS","ERROR","handleInputChange","persist","target","name","value","console","log"],"mappings":"u4BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,SAAf,KAAgC,iBAAhC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,eACCP,QAAQ,CAAC,CACnCQ,KAAK,CAAE,EAD4B,CAEnCC,QAAQ,CAAE,EAFyB,CAAD,CADT,wCACpBC,MADoB,eACZC,SADY,8BAMKX,QAAQ,CAAC,KAAD,CANb,yCAMpBY,QANoB,eAMVC,WANU,eAQ3B,GAAMC,CAAAA,YAAY,2FAAG,iBAAMC,KAAN,2HACnBA,KAAK,CAACC,cAAN,GADmB,sCAIEf,CAAAA,KAAK,CAACgB,IAAN,CAAW,mBAAX,CAAgCP,MAAhC,CAJF,QAIXQ,IAJW,eAMjB,GAAIA,IAAI,CAACC,MAAL,GAAgB,GAApB,CAAyB,CACvBZ,OAAO,CAACW,IAAI,CAACE,IAAL,CAAUC,IAAX,CAAP,CACAhB,KAAK,CAAC,iCAAD,CAAoC,CACvCiB,IAAI,CAAEjB,KAAK,CAACkB,IAAN,CAAWC,OADsB,CAApC,CAAL,CAGAX,WAAW,CAAC,IAAD,CAAX,CACD,CAND,IAMO,CACLR,KAAK,CAAC,mEAAD,CAAsE,CACzEiB,IAAI,CAAEjB,KAAK,CAACkB,IAAN,CAAWE,KADwD,CAAtE,CAAL,CAGD,CAhBgB,+EAkBjBpB,KAAK,CAAC,mEAAD,CAAsE,CACzEiB,IAAI,CAAEjB,KAAK,CAACkB,IAAN,CAAWE,KADwD,CAAtE,CAAL,CAlBiB,oEAAH,kBAAZX,CAAAA,YAAY,6CAAlB,CAwBA,GAAMY,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAX,KAAK,CAAI,CACjCA,KAAK,CAACY,OAAN,GADiC,kBAGXZ,KAAK,CAACa,MAHK,CAG1BC,IAH0B,eAG1BA,IAH0B,CAGpBC,KAHoB,eAGpBA,KAHoB,CAKjCnB,SAAS,CAAC,SAAAD,MAAM,wCACXA,MADW,wBAEbmB,IAFa,CAENC,KAFM,IAAP,CAAT,CAIAC,OAAO,CAACC,GAAR,CAAYtB,MAAZ,EACD,CAVD,CAYA,GAAIE,QAAJ,CAAc,CACZ,mBAAQ,oBAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAR,CACD,CAED,mBACE,oBAAC,SAAD,EAAW,SAAS,CAAC,MAArB,eACE,+CACE,sCADF,CADF,cAKE,8BALF,cAOE,oBAAC,IAAD,EAAM,QAAQ,CAAEE,YAAhB,eACE,oBAAC,IAAD,CAAM,KAAN,mBACE,6BAAO,OAAO,CAAC,OAAf,WADF,cAEE,oBAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,OAAnB,CAA2B,IAAI,CAAC,OAAhC,CAAwC,QAAQ,CAAEY,iBAAlD,CAAqE,KAAK,CAAEhB,MAAM,CAACF,KAAnF,EAFF,CADF,cAME,oBAAC,IAAD,CAAM,KAAN,mBACE,6BAAO,OAAO,CAAC,UAAf,cADF,cAEE,oBAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CAA8B,IAAI,CAAC,UAAnC,CAA8C,QAAQ,CAAEkB,iBAAxD,CAA2E,KAAK,CAAEhB,MAAM,CAACD,QAAzF,EAFF,CANF,cAWE,oBAAC,IAAD,CAAM,KAAN,mBACE,8BAAQ,SAAS,CAAC,iBAAlB,UADF,CAXF,CAPF,CADF,CA0BD,CA1ED,CA4EA,cAAeH,CAAAA,KAAf","sourcesContent":["import React from 'react';\nimport { useState } from 'react';\nimport Axios from 'axios';\nimport { Form, Container } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst Login = ({setUser}) => {\n  const [inputs, setInputs] = useState({\n    email: '',\n    password: ''\n  });\n\n  const [redirect, setRedirect] = useState(false);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const resp = await Axios.post('/api/authenticate', inputs);\n\n      if (resp.status === 200) {\n        setUser(resp.data.user);\n        toast('You have logged in successfully', {\n          type: toast.TYPE.SUCCESS\n        });\n        setRedirect(true);\n      } else {\n        toast(\"There was an issue logging you in. Please check your credentials.\", {\n          type: toast.TYPE.ERROR\n        });\n      }\n    } catch (error) {\n      toast(\"There was an issue logging you in. Please check your credentials.\", {\n        type: toast.TYPE.ERROR\n      });\n    }\n  };\n\n  const handleInputChange = event => {\n    event.persist();\n\n    const {name, value} = event.target;\n\n    setInputs(inputs => ({\n      ...inputs,\n      [name]: value\n    }));\n    console.log(inputs);\n  };\n\n  if (redirect) {\n    return (<Redirect to=\"/blogs\"/>);\n  }\n\n  return (\n    <Container className=\"my-5\">\n      <header>\n        <h1>Login</h1>\n      </header>\n\n      <hr/>\n      \n      <Form onSubmit={handleSubmit}>\n        <Form.Group>\n          <label htmlFor=\"email\">Email:</label>\n          <Form.Control type=\"email\" name=\"email\" onChange={handleInputChange} value={inputs.email}/>\n        </Form.Group>\n\n        <Form.Group>\n          <label htmlFor=\"password\">Password:</label>\n          <Form.Control type=\"password\" name=\"password\" onChange={handleInputChange} value={inputs.password}/>\n        </Form.Group>\n\n        <Form.Group>\n          <button className=\"btn btn-primary\">Login</button>\n        </Form.Group>\n      </Form>\n        \n    </Container>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}