{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\React\\\\comp-2068-s20-blogging-platform-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Container}from'react-bootstrap';import Axios from'axios';import{toast}from'react-toastify';import{Link}from'react-router-dom';var Index=function Index(_ref){var user=_ref.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),blogs=_useState2[0],setBlogs=_useState2[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getBlogs();case 2:case\"end\":return _context.stop();}}},_callee);}))();},[]);var getBlogs=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var blogsResp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.get('/api/blogs');case 2:blogsResp=_context2.sent;if(blogsResp.status===200)setBlogs(blogsResp.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getBlogs(){return _ref3.apply(this,arguments);};}();var deleteBlog=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(blog){var resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Axios.post('/api/blogs/delete',{id:blog._id});case 3:resp=_context3.sent;if(resp.status===200)toast(\"The blog was deleted successfully\",{type:toast.TYPE.SUCCESS});_context3.next=7;return getBlogs();case 7:_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);toast(\"There was an error deleting the blog\",{type:toast.TYPE.ERROR});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function deleteBlog(_x){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(Container,{className:\"my-5\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Archive\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},blogs&&blogs.map(function(blog,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"card my-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header clearfix\"},/*#__PURE__*/React.createElement(\"div\",{className:\"float-left\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"card-title\"},blog.title),blog.user?/*#__PURE__*/React.createElement(\"small\",null,\"~\",blog.user.fullname):null),/*#__PURE__*/React.createElement(\"div\",{className:\"float-right\"},/*#__PURE__*/React.createElement(\"small\",null,blog.updatedAt))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},blog.synopsis)),user?/*#__PURE__*/React.createElement(\"div\",{className:\"card-footer\"},/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/blogs/edit\",state:{id:blog._id}}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-edit\"})),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return deleteBlog(blog);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash\"}))):null);})));};export default Index;","map":{"version":3,"sources":["E:/React/comp-2068-s20-blogging-platform-master/client/src/components/blogs/Index.jsx"],"names":["React","useEffect","useState","Container","Axios","toast","Link","Index","user","blogs","setBlogs","getBlogs","get","blogsResp","status","data","deleteBlog","blog","post","id","_id","resp","type","TYPE","SUCCESS","ERROR","map","i","title","fullname","updatedAt","synopsis","pathname","state"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAkB,IAAPC,CAAAA,IAAO,MAAPA,IAAO,eAEJN,QAAQ,CAAC,EAAD,CAFJ,wCAEvBO,KAFuB,eAEhBC,QAFgB,eAI9BT,SAAS,CAAC,UAAM,CACd,wDAAC,yJACOU,CAAAA,QAAQ,EADf,uDAAD,KAGD,CAJQ,CAIN,EAJM,CAAT,CAMA,GAAMA,CAAAA,QAAQ,2FAAG,6KACSP,CAAAA,KAAK,CAACQ,GAAN,CAAU,YAAV,CADT,QACTC,SADS,gBAEf,GAAIA,SAAS,CAACC,MAAV,GAAqB,GAAzB,CAA8BJ,QAAQ,CAACG,SAAS,CAACE,IAAX,CAAR,CAFf,wDAAH,kBAARJ,CAAAA,QAAQ,2CAAd,CAKA,GAAMK,CAAAA,UAAU,2FAAG,kBAAMC,IAAN,uKAEIb,CAAAA,KAAK,CAACc,IAAN,CAAW,mBAAX,CAAgC,CACjDC,EAAE,CAAEF,IAAI,CAACG,GADwC,CAAhC,CAFJ,QAETC,IAFS,gBAMf,GAAIA,IAAI,CAACP,MAAL,GAAgB,GAApB,CAAyBT,KAAK,CAAC,mCAAD,CAAsC,CAACiB,IAAI,CAAEjB,KAAK,CAACkB,IAAN,CAAWC,OAAlB,CAAtC,CAAL,CANV,uBAQTb,CAAAA,QAAQ,EARC,2FAUfN,KAAK,CAAC,sCAAD,CAAyC,CAACiB,IAAI,CAAEjB,KAAK,CAACkB,IAAN,CAAWE,KAAlB,CAAzC,CAAL,CAVe,sEAAH,kBAAVT,CAAAA,UAAU,6CAAhB,CAcA,mBACE,oBAAC,SAAD,EAAW,SAAS,CAAC,MAArB,eACE,+CACE,wCADF,CADF,cAKE,8BALF,cAOE,2BAAK,SAAS,CAAC,SAAf,EACGP,KAAK,EAAIA,KAAK,CAACiB,GAAN,CAAU,SAACT,IAAD,CAAOU,CAAP,qBAClB,2BAAK,GAAG,CAAEA,CAAV,CAAa,SAAS,CAAC,WAAvB,eACE,2BAAK,SAAS,CAAC,sBAAf,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,0BAAI,SAAS,CAAC,YAAd,EACGV,IAAI,CAACW,KADR,CADF,CAKGX,IAAI,CAACT,IAAL,cACC,qCAASS,IAAI,CAACT,IAAL,CAAUqB,QAAnB,CADD,CAEG,IAPN,CADF,cAWE,2BAAK,SAAS,CAAC,aAAf,eACE,iCAAQZ,IAAI,CAACa,SAAb,CADF,CAXF,CADF,cAiBE,2BAAK,SAAS,CAAC,WAAf,eACE,yBAAG,SAAS,CAAC,WAAb,EACGb,IAAI,CAACc,QADR,CADF,CAjBF,CAuBGvB,IAAI,cACH,2BAAK,SAAS,CAAC,aAAf,eACE,oBAAC,IAAD,EAAM,EAAE,CAAE,CACRwB,QAAQ,CAAE,aADF,CAERC,KAAK,CAAE,CACLd,EAAE,CAAEF,IAAI,CAACG,GADJ,CAFC,CAAV,eAME,yBAAG,SAAS,CAAC,YAAb,EANF,CADF,cAUE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,yBAAMJ,CAAAA,UAAU,CAACC,IAAD,CAAhB,EAA/B,eACE,yBAAG,SAAS,CAAC,aAAb,EADF,CAVF,CADG,CAeD,IAtCN,CADkB,EAAV,CADZ,CAPF,CADF,CAuDD,CApFD,CAsFA,cAAeV,CAAAA,KAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Container } from 'react-bootstrap';\nimport Axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { Link } from 'react-router-dom';\n\nconst Index = function ({user}) {\n\n  const [blogs, setBlogs] = useState([]);\n\n  useEffect(() => {\n    (async () => {\n      await getBlogs();\n    })();\n  }, []);\n\n  const getBlogs = async () => {\n    const blogsResp = await Axios.get('/api/blogs');\n    if (blogsResp.status === 200) setBlogs(blogsResp.data);\n  };\n\n  const deleteBlog = async blog => {\n    try {\n      const resp = await Axios.post('/api/blogs/delete', {\n        id: blog._id\n      });\n\n      if (resp.status === 200) toast(\"The blog was deleted successfully\", {type: toast.TYPE.SUCCESS});\n\n      await getBlogs();\n    } catch (error) {\n      toast(\"There was an error deleting the blog\", {type: toast.TYPE.ERROR});\n    }\n  };\n\n  return (\n    <Container className=\"my-5\">\n      <header>\n        <h1>Archive</h1>\n      </header>\n\n      <hr/>\n\n      <div className=\"content\">\n        {blogs && blogs.map((blog, i) => (\n          <div key={i} className=\"card my-3\">\n            <div className=\"card-header clearfix\">\n              <div className=\"float-left\">\n                <h5 className=\"card-title\">\n                  {blog.title}\n                </h5>\n\n                {blog.user ? (\n                  <small>~{blog.user.fullname}</small>\n                ) : null}\n              </div>\n                  \n              <div className=\"float-right\">\n                <small>{blog.updatedAt}</small>\n              </div>\n            </div>\n\n            <div className=\"card-body\">\n              <p className=\"card-text\">\n                {blog.synopsis}\n              </p>\n            </div>\n\n            {user ? (\n              <div className=\"card-footer\">\n                <Link to={{\n                  pathname: \"/blogs/edit\",\n                  state: {\n                    id: blog._id\n                  }\n                }}>\n                  <i className=\"fa fa-edit\"></i>\n                </Link>\n\n                <button type=\"button\" onClick={() => deleteBlog(blog)}>\n                  <i className=\"fa fa-trash\"></i>\n                </button>\n              </div>\n            ) : null}\n          </div>\n        ))}\n      </div>\n    </Container>\n  );\n\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}